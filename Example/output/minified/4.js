(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"3e26":function(t,e,n){"use strict";n.r(e);var i=n("e4fd"),o=n("8efa"),s=n("fe17"),a=Object(i.defineComponent)({name:"WifiButton",components:{},props:{applyingchanges:{type:Boolean,default:!1}},setup(t,{emit:e}){const n=Object(i.ref)(""),o=Object(i.ref)("");return{isPwd:Object(i.ref)(!0),ssid:n,password:o,emitConnect:function(){e("connect",n.value,o.value)}}}}),r=n("2877"),c=n("66e5"),d=n("4074"),l=n("27f9"),u=n("0016"),f=n("9c40"),m=n("eebe"),p=n.n(m),v=Object(r.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("q-item",{staticClass:"q-mb-sm"},[n("q-item-section",{attrs:{"no-wrap":"",top:""}},[n("q-input",{attrs:{hint:"Name"},model:{value:t.ssid,callback:function(e){t.ssid=e},expression:"ssid"}})],1)],1),n("q-item",{staticClass:"q-mb-sm"},[n("q-item-section",{attrs:{"no-wrap":""}},[n("q-input",{attrs:{hint:"Password",type:t.isPwd?"password":"text"},scopedSlots:t._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}]),model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("q-item-section",{attrs:{side:"",top:""}},[n("q-btn",{attrs:{flat:"",round:"",color:"primary",icon:"done",loading:t.applyingchanges,disable:t.password.length<=0},on:{click:t.emitConnect}})],1)],1)],1)},[],!1,null,null,null),h=v.exports;p()(v,"components",{QItem:c.a,QItemSection:d.a,QInput:l.a,QIcon:u.a,QBtn:f.a});var w=function(t,e,n,i){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,s){function a(t){try{c(i.next(t))}catch(t){s(t)}}function r(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){t.done?n(t.value):o(t.value).then(a,r)}c((i=i.apply(t,e||[])).next())})},y=Object(i.defineComponent)({name:"WiFi",components:{WifiButton:s.a,WifiAddNetwork:h},setup(){const t=Object(i.ref)(!0),e=Object(i.ref)({}),n=Object(i.computed)(()=>e.value.Wifi?""+e.value.Wifi.SSId:""),s=Object(i.ref)({}),a=Object(i.computed)(()=>{var t;return 0!=(null===(t=s.value.Networks)||void 0===t?void 0:t.length)}),r=Object(i.computed)(()=>s.value.Networks?s.value.Networks:[]);function c(){return w(this,void 0,void 0,function*(){var n=yield o.a.wifiScan();if(n){s.value=n;var i=yield o.a.state();i&&(e.value=i,t.value=!1)}})}var d=null;function l(){d=setInterval(()=>c(),3e3)}function u(){d&&clearInterval(d)}Object(i.onMounted)(()=>w(this,void 0,void 0,function*(){yield c(),l()})),Object(i.onUnmounted)(()=>{u()});const f=Object(i.ref)(!1),m=Object(i.ref)(!1);return{loading:t,state:e,wifi:s,hasNetworks:a,networks:r,currentSsid:n,connect:function(t,e){return w(this,void 0,void 0,function*(){if(t&&e){u(),f.value=!0;var n=[];n.push("SSID1 "+t),n.push("Password1 "+e),yield o.a.backlog(n),m.value=!0,setTimeout(()=>{f.value=!1,l()},5e3)}})},applyingChanges:f,warningWifi:m}}}),b=n("9989"),g=n("06d5"),C=n("1c1c"),q=n("3b73"),k=n("0170"),x=n("f09f"),S=n("a370"),_=Object(r.a)(y,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"fit column items-center justify-evenly content-center q-pa-lg"},[t.loading?n("div",{staticClass:"full-width column items-center",staticStyle:{"max-width":"320px"}},[n("q-spinner-puff",{attrs:{size:"xl",color:"primary"}})],1):t._e(),t.loading||t.hasNetworks?t._e():n("div",{staticClass:"full-width column items-center",staticStyle:{"max-width":"320px"}},[n("div",{staticClass:"full-width column items-center q-my-sm"},[n("div",{staticClass:"text-h6 text-warning"},[t._v("No networks found")])])]),!t.loading&&t.hasNetworks?n("div",{staticClass:"full-width row",staticStyle:{"max-width":"320px"}},[n("div",{staticClass:"full-width row q-my-sm"},[n("div",{staticClass:"text-h7"},[t._v("WiFi")])]),n("div",{staticClass:"full-width column q-mt-sm"},[n("q-list",{attrs:{bordered:""}},[t._l(t.networks,function(e){return n("q-expansion-item",{key:e.SSID,attrs:{group:"wifigroup",icon:"wifi",label:e.SSID,"header-class":"text-primary","switch-toggle-side":""},scopedSlots:t._u([{key:"header",fn:function(){return[n("q-item-section",[n("q-item-label",{attrs:{lines:"1"}},[t._v(t._s(e.SSID))]),t.currentSsid==e.SSID?n("q-item-label",{attrs:{caption:""}},[t._v("Connected")]):t._e()],1),n("q-item-section",{attrs:{side:""}},[n("q-icon",{attrs:{name:"wifi",color:"primary"}})],1)]},proxy:!0}],null,!0)},[n("wifi-button",{attrs:{network:e,applyingchanges:t.applyingChanges},on:{connect:function(n){return t.connect(e.SSID,n)}}})],1)}),n("q-expansion-item",{attrs:{group:"wifigroup",icon:"wifi",label:"Add Network","header-class":"text-primary","switch-toggle-side":""},scopedSlots:t._u([{key:"header",fn:function(){return[n("q-item-section",[n("q-item-label",{attrs:{lines:"1"}},[t._v("Add Network")])],1),n("q-item-section",{attrs:{side:""}},[n("q-icon",{attrs:{name:"wifi",color:"primary"}})],1)]},proxy:!0}],null,!1,929822308)},[n("wifi-add-network",{attrs:{applyingchanges:t.applyingChanges},on:{connect:t.connect}})],1)],2)],1),t.warningWifi?n("div",{staticClass:"full-width column q-mt-md"},[n("q-card",[n("q-card-section",[n("div",{staticClass:"text-h6 text-warning"},[t._v("Warning:")]),t._v("\n          The new WiFi settings have been applied. Please reload the page in a few seconds to connect to the device again.\n        ")])],1)],1):t._e()]):t._e()])},[],!1,null,null,null);e.default=_.exports,p()(_,"components",{QPage:b.a,QSpinnerPuff:g.a,QList:C.a,QExpansionItem:q.a,QItemSection:d.a,QItemLabel:k.a,QIcon:u.a,QCard:x.a,QCardSection:S.a})},"8efa":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n("bc3a"),o=n.n(i),s=function(t,e,n,i){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,s){function a(t){try{c(i.next(t))}catch(t){s(t)}}function r(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){t.done?n(t.value):o(t.value).then(a,r)}c((i=i.apply(t,e||[])).next())})};class a{static httpGet(t){return s(this,void 0,void 0,function*(){try{let e="localhost"==window.location.hostname||"192.168.1.50"==window.location.hostname?"192.168.1.63":window.location.hostname;return(yield o.a.get("http://"+e+"/"+t)).data}catch(t){return void console.log("error",t)}})}static sendCommand(t){return s(this,void 0,void 0,function*(){return yield this.httpGet("cm?cmnd="+encodeURI(t))})}static state(){return s(this,void 0,void 0,function*(){return yield this.sendCommand("State")})}static toggle(){return s(this,void 0,void 0,function*(){return yield this.sendCommand("Power Toggle")})}static blink(){return s(this,void 0,void 0,function*(){return yield this.sendCommand("Power 3")})}static stopBlink(){return s(this,void 0,void 0,function*(){return yield this.sendCommand("Power 4")})}static dimmer(t){return s(this,void 0,void 0,function*(){return yield this.sendCommand("Dimmer "+t)})}static ct(t){return s(this,void 0,void 0,function*(){return yield this.sendCommand("CT "+t)})}static hsbColor1(t){return s(this,void 0,void 0,function*(){return yield this.sendCommand("HsbColor1 "+t)})}static hsbColor2(t){return s(this,void 0,void 0,function*(){return yield this.sendCommand("HsbColor2 "+t)})}static ipAddress(){return s(this,void 0,void 0,function*(){return yield this.sendCommand("IPAddress")})}static ipAddress1(t){return s(this,void 0,void 0,function*(){return yield this.sendCommand("IPAddress1 "+t)})}static deviceName(t){return s(this,void 0,void 0,function*(){return yield this.sendCommand("DeviceName "+t)})}static status(){return s(this,void 0,void 0,function*(){return yield this.sendCommand("Status")})}static status0(){return s(this,void 0,void 0,function*(){return yield this.sendCommand("Status 0")})}static backlog(t){return s(this,void 0,void 0,function*(){var e="Backlog ";for(const n of t)e=e+n+";";return yield this.sendCommand(e)})}static restart(t){return s(this,void 0,void 0,function*(){return yield this.sendCommand("Restart "+t)})}static reset(t){return s(this,void 0,void 0,function*(){return yield this.sendCommand("Reset "+t)})}static wifiScan(){return s(this,void 0,void 0,function*(){return yield this.httpGet("wj")})}static info(){return s(this,void 0,void 0,function*(){return yield this.httpGet("ij")})}}},fe17:function(t,e,n){"use strict";var i=n("e4fd"),o=Object(i.defineComponent)({name:"WifiButton",components:{},props:{network:{type:Object,required:!0},applyingchanges:{type:Boolean,default:!1}},setup(t,{emit:e}){const n=Object(i.ref)("");return{isPwd:Object(i.ref)(!0),password:n,emitConnect:function(){e("connect",n.value)}}}}),s=n("2877"),a=n("66e5"),r=n("4074"),c=n("27f9"),d=n("0016"),l=n("9c40"),u=n("eebe"),f=n.n(u),m=Object(s.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-item",{staticClass:"q-mb-sm"},[n("q-item-section",{attrs:{"no-wrap":""}},[n("q-input",{attrs:{hint:"Password",type:t.isPwd?"password":"text"},scopedSlots:t._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}]),model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("q-item-section",{attrs:{side:"",top:""}},[n("q-btn",{attrs:{flat:"",round:"",color:"primary",icon:"done",loading:t.applyingchanges,disable:t.password.length<=0},on:{click:t.emitConnect}})],1)],1)},[],!1,null,null,null);e.a=m.exports,f()(m,"components",{QItem:a.a,QItemSection:r.a,QInput:c.a,QIcon:d.a,QBtn:l.a})}}]);